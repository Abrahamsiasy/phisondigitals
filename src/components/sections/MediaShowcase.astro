---
import Container from "../shared/Container.astro";
import Title from "../shared/Title.astro";
import { mediaPhotos, mediaVideos } from "../../utils/media";
---

<section id="media-showcase" class="py-16 md:py-20">
    <Container className="space-y-10">
        <div class="text-center max-w-3xl mx-auto">
            <Title className="mb-3">Video & Photo Showcase</Title>
            <p class="text-heading-3">
                Sample media section for campaign videos and production photos. Click any video to watch directly.
            </p>
        </div>

        <div class="grid lg:grid-cols-3 gap-6">
            {mediaVideos.slice(0, 3).map((video) => (
                <article class="bg-box-bg border border-box-border rounded-2xl overflow-hidden shadow-sm hover:shadow-lg transition-all duration-300">
                    <div class="aspect-video bg-black">
                        <iframe
                            class="w-full h-full"
                            src={video.embedUrl}
                            title={video.title}
                            loading="lazy"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            referrerpolicy="strict-origin-when-cross-origin"
                            allowfullscreen
                        ></iframe>
                    </div>
                    <div class="p-4">
                        <p class="text-sm text-[#1E6DEB] font-semibold">{video.platform}</p>
                        <h3 class="text-base font-semibold text-heading-1 mt-1">{video.title}</h3>
                    </div>
                </article>
            ))}
        </div>

        <div class="media-preview-grid grid-loading-fx2">
            {mediaPhotos.slice(0, 6).map((photo, index) => (
                <a
                    href={photo.image}
                    target="_blank"
                    rel="noopener noreferrer"
                    class={`media-tile grid-item media-tile-${(index % 6) + 1}`}
                    aria-label={`Open ${photo.title}`}
                >
                    <img src={photo.image} alt={photo.title} loading="lazy" width="367" height="267" class="w-full h-full object-cover" />
                    <div class="media-overlay">
                        <p class="text-xs font-semibold uppercase tracking-wide text-white/85">{photo.category}</p>
                        <h3 class="text-sm md:text-base font-semibold text-white">{photo.title}</h3>
                    </div>
                    <span class="open-pill">Open</span>
                </a>
            ))}
        </div>

        <div class="text-center">
            <a
                href="/media"
                class="inline-flex items-center gap-2 px-8 py-4 bg-[#1E6DEB] hover:bg-[#1554B3] text-white font-bold rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300"
            >
                Show More Media
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </a>
        </div>
    </Container>
</section>

<style>
    .media-preview-grid {
        display: grid;
        grid-template-columns: repeat(12, minmax(0, 1fr));
        gap: 1rem;
    }

    .media-tile {
        position: relative;
        overflow: hidden;
        border-radius: 1rem;
        border: 1px solid rgb(var(--box-border));
        min-height: 180px;
        transform: perspective(1000px) translateY(64px) scale(0.78) rotateX(-38deg);
        transform-origin: 50% 100%;
        opacity: 0;
        animation: gridFx2In 0.9s cubic-bezier(0.2, 0.9, 0.2, 1) forwards;
        will-change: transform, opacity;
    }

    .media-tile img {
        transition: transform 0.7s ease;
    }

    .media-tile:hover {
        transform: perspective(1000px) translateY(-4px) scale(1.01) rotateX(0deg);
        box-shadow: 0 18px 36px rgba(15, 46, 92, 0.24);
    }

    .media-tile:hover img {
        transform: scale(1.09);
    }

    .open-pill {
        position: absolute;
        top: 0.75rem;
        right: 0.75rem;
        padding: 0.25rem 0.55rem;
        border-radius: 999px;
        font-size: 0.68rem;
        font-weight: 700;
        color: #0f2e5c;
        background: rgba(255, 255, 255, 0.88);
        opacity: 0;
        transform: translateY(-6px);
        transition: all 0.28s ease;
    }

    .media-tile:hover .open-pill {
        opacity: 1;
        transform: translateY(0);
    }

    .media-overlay {
        position: absolute;
        inset: auto 0 0 0;
        padding: 0.75rem;
        background: linear-gradient(to top, rgba(15, 46, 92, 0.85), rgba(15, 46, 92, 0.1));
        display: flex;
        flex-direction: column;
        gap: 0.2rem;
    }

    .media-tile-1 { grid-column: span 4; min-height: 300px; animation-delay: 0.05s; }
    .media-tile-2 { grid-column: span 4; min-height: 210px; animation-delay: 0.12s; }
    .media-tile-3 { grid-column: span 4; min-height: 260px; animation-delay: 0.18s; }
    .media-tile-4 { grid-column: span 3; min-height: 180px; animation-delay: 0.22s; }
    .media-tile-5 { grid-column: span 5; min-height: 180px; animation-delay: 0.26s; }
    .media-tile-6 { grid-column: span 4; min-height: 180px; animation-delay: 0.3s; }

    @keyframes gridFx2In {
        60% {
            opacity: 1;
            transform: perspective(1000px) translateY(-8px) scale(1.02) rotateX(3deg);
        }
        100% {
            transform: perspective(1000px) translateY(0) scale(1) rotateX(0deg);
            opacity: 1;
        }
    }

    @media (max-width: 1024px) {
        .media-tile-1,
        .media-tile-2,
        .media-tile-3,
        .media-tile-4,
        .media-tile-5,
        .media-tile-6 {
            grid-column: span 6;
            min-height: 220px;
        }
    }

    @media (max-width: 640px) {
        .media-tile-1,
        .media-tile-2,
        .media-tile-3,
        .media-tile-4,
        .media-tile-5,
        .media-tile-6 {
            grid-column: span 12;
            min-height: 200px;
        }
    }
</style>
